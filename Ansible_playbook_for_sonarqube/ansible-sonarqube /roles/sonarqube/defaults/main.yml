---
sonarqube_use_embedded_db: true

# SonarQube version (pin here)
sonarqube_version: "10.6.0.92116"

# Download base URL (zip distribution)
sonarqube_download_url: "https://binaries.sonarsource.com/Distribution/sonarqube"

# Install paths
sonarqube_parent_dir: "/opt"
sonarqube_install_dir: "{{ sonarqube_parent_dir }}/sonarqube-{{ sonarqube_version }}"
sonarqube_current_symlink: "{{ sonarqube_parent_dir }}/sonarqube"

# User/Group
sonarqube_user: "sonarqube"
sonarqube_group: "sonarqube"
sonarqube_shell: "/usr/sbin/nologin"

# Service
sonarqube_service_name: "sonarqube"
sonarqube_java_package_override: ""   # allow override if needed

# Network
sonarqube_listen_address: "0.0.0.0"
sonarqube_port: 9000
sonarqube_context_path: ""

# DB config (external DB recommended)
sonarqube_jdbc_username: "sonar"
sonarqube_jdbc_password: "sonar"
sonarqube_jdbc_url: "jdbc:postgresql://127.0.0.1:5432/sonarqube"
sonarqube_use_embedded_db: true

# sonar.properties extra options (map)
sonarqube_extra_properties: {}
# Example:
# sonarqube_extra_properties:
#   "sonar.web.javaAdditionalOpts": "-Djava.net.preferIPv4Stack=true"

# Zip checksum (optional but recommended)
# sonarqube_zip_checksum: "sha256:...."

# Manage sysctl limits (SonarQube/ElasticSearch needs vm.max_map_count)
sonarqube_set_vm_max_map_count: true
sonarqube_vm_max_map_count_value: 524288

# Ensure unzip present
sonarqube_manage_unzip: true

sonarqube_download_dir: "/var/tmp/sonarqube"

# JVM tuning (lab/small instance)
sonarqube_web_java_opts: "-Xms256m -Xmx512m"
sonarqube_ce_java_opts: "-Xms256m -Xmx512m"
sonarqube_search_java_opts: "-Xms512m -Xmx512m"
